$.fn.productPropertyValuesEditor=function(){var a=$(this);if(!a.data("initialized")){a.data("initialized",!0);var t=a.data("property-values-name"),e=a.data("table-class"),n=a.data("data-table-header-class"),d=a.data("translations")||{},i=a.closest("form").find("[name='"+t+"']");if(i.length<=0)return void console.warn("init product property values editor failed",i);var r=function(a){return d[a]||a},l=r("Name"),o=r("Remark"),c=a.editableTable({tableClass:e,tableHeaderClass:n,columns:[l,o]}),p=c.find("tbody"),u="addRow.editableTable";c.on(u,function(a,t){var e=$("<tr>");_.each([["name",l],["remark",o]],function(a){e.append($("<td>").addClass(a[0]).append($("<input>").addClass("form-control").attr("type","text").attr("placeholder",a[1])))}),e.append(c.data("actionsCell").clone()),e.data("property-value-id",t.Id),e.find(".name input").val(t.Name),e.find(".remark input").val(t.Remark),p.append(e)});var s="bind.editableTable",f="collect.editableTable",v="bindLock.editableTable";c.on(s,function(){a.data(v,!0),p.empty();var t=JSON.parse(i.val()||"[]")||[];_.each(t,function(a){c.trigger(u,a)}),a.data(v,!1)}),c.on(f,function(){if(!a.data(v)){var t=[],e=p.find("> tr");e.each(function(){var a=$(this);t.push({Id:a.data("property-value-id")||null,Name:a.find(".name input").val(),Remark:a.find(".remark input").val()})}),i.val(JSON.stringify(t))}}),c.trigger(s)}},$(function(){var a=function(a){a.each(function(){$(this).productPropertyValuesEditor()})},t="[data-toggle='product-property-values-editor']";a($(t)),$(document).on("dynamicLoaded",function(e,n){a($(n).find(t))})});
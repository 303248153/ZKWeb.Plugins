$(function(){var t=function(){var t=$(this),a=t.closest(".product-summary-row").find(".product-purchase-form"),o=t.data("parameters");if(a.addClass("unbuyable"),o){var i=o.OrderCount,n=parseInt(t.find(".stock").text()),r=0>=i||0>=n;a.find("[name='matchParameters']").val(JSON.stringify(o)),r?a.addClass("unbuyable"):a.removeClass("unbuyable")}},a=$(".product-view .product-sales-info");a.on("applyMatchParameters.productSalesInfo",t),a.each(function(){t.call($(this))})}),$(function(){var t=$(".product-view .product-purchase-buttons"),a=function(a){var o=$(this).closest(t).find(".product-purchase-form");o.find("[name='isBuyNow']").val(a?"true":"false"),o.submit()};t.find(".btn-buynow").on("click",function(){a.call(this,!0)}),t.find(".btn-add-to-cart").on("click",function(){a.call(this,!1)});var o=t.find(".product-purchase-form"),i=null;o.on("success",function(a,o){if(o.redirectTo)return void(location.href=o.redirectTo);if(o.showDialog){var n=$(this).closest(t).find(".product-added-to-cart-dialog");n.find(".total-count").text(o.showDialog.totalCount),n.find(".total-price").text(o.showDialog.totalPriceString),n.removeClass("hide"),clearTimeout(i),i=setTimeout(function(){n.addClass("hide")},5e3)}$(".minicart-menu").trigger("reinitialize.miniCart")}),t.find(".product-added-to-cart-dialog .dialog-close").on("click",function(){$(this).closest(".product-added-to-cart-dialog").addClass("hide")})});
$(function(){window.VisualEditor={parseWidgetElement:function(t){var e=t.attr("data-widget")||"",i=e.indexOf("{");return i>=0?{path:e.substr(0,i),args:e.substr(i)}:{path:e,args:null}}}}),$(function(){var t=function(t){return t.preventDefault&&t.preventDefault(),!1},e=function(){$.toast("TODO")},i=function(){$.toast("TODO")},n=function(){BootstrapDialog.showRemote($(this).text().trim(),"/api/visual_editor/get_switch_pages",{type:"type-warning",size:"size-normal"})},a=function(){$.toast("TODO")},o=function(){var t=$(this),e=VisualEditor.parseWidgetElement(t),i=$("<div>").addClass("template-widget-title-bar");i.append($("<span>").addClass("name").text(e.path)),i.prependTo(t)},d=function(){var t=$(this);t.find(".template-widget-title-bar").remove()};$(document).on("visual-editor-loaded",function(){var s=$("body *:not(.visual-editor-top-bar):not(.modal) *");s.unbind("click").unbind("mouseenter").unbind("mouseleave"),s.bind("click",t);var r=$(".visual-editor-top-bar");r.find(".add-element").on("click",e),r.find(".manage-theme").on("click",i),r.find(".switch-page").on("click",n),r.find(".save-changes").on("click",a),$(document).on("mouseenter",".template_widget",o),$(document).on("mouseleave",".template_widget",d)})}),$(function(){$("body").append($("<div>").addClass("visual-editor-loading")),$.ajax({url:"/api/visual_editor/get_top_bar",cache:!1,success:function(t){$("body").prepend(t),setTimeout(function(){$(document).trigger("visual-editor-loaded"),setTimeout(function(){$(".visual-editor-loading").remove()},250)},100)}})});
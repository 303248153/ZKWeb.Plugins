$(function(){var t=function(){var t=$(this),a=t.closest(".product-summary-row").find(".product-purchase-form"),i=t.data("parameters");if(a.addClass("unbuyable"),i){var o=i.OrderCount,n=parseInt(t.find(".stock").text()),r=0>=o||0>=n;a.find("[name='matchParameters']").val(JSON.stringify(i)),r?a.addClass("unbuyable"):a.removeClass("unbuyable")}},a=$(".product-view .product-sales-info");a.on("applyMatchParameters.productSalesInfo",t),a.each(function(){t.call($(this))})}),$(function(){var t=$(".product-view .product-purchase-buttons"),a=function(a){var i=$(this).closest(t).find(".product-purchase-form");i.find("[name='isBuyNow']").val(a?"true":"false"),i.submit()};t.find(".btn-buynow").on("click",function(){a.call(this,!0)}),t.find(".btn-add-to-cart").on("click",function(){a.call(this,!1)});var i=t.find(".product-purchase-form"),o=null;i.on("success",function(t){if(t.redirectTo)return void(location.href=t.redirectTo);if(t.showDialog){var a=i.closest(a),n=a.find(".product-added-to-cart-dialog");n.find(".total-count").text(t.showDialog.totalCount),n.find(".total-price").text(t.showDialog.totalPriceString),n.removeClass("hide"),clearTimeout(o),o=setTimeout(function(){n.addClass("hide")},5e3)}$(".minicart-menu").trigger("reinitialize.miniCart")})});
$(function(){var t=function(){var t=$(this),o=t.closest(".product-summary-row").find(".product-purchase-form"),a=t.data("parameters");if(o.addClass("unbuyable"),a){var i=a.OrderCount,n=parseInt(t.find(".stock").text()),e=0>=i||0>=n;o.find("[name='matchParameters']").val(JSON.stringify(a)),e?o.addClass("unbuyable"):o.removeClass("unbuyable")}},o=$(".product-view .product-sales-info");o.on("applyMatchParameters.productSalesInfo",t),o.each(function(){t.call($(this))})}),$(function(){var t=$(".product-view .product-purchase-buttons"),o=function(o){var a=$(this).closest(t).find(".product-purchase-form");a.find("[name='isBuyNow']").val(o?"true":"false"),a.submit()};t.find(".btn-buynow").on("click",function(){o.call(this,!0)}),t.find(".btn-add-to-cart").on("click",function(){o.call(this,!1)});var a=t.find(".product-purchase-form"),i=null;a.on("success",function(o,a){if(a.redirectTo)return void(location.href=a.redirectTo);if(a.showDialog){var n=$(this).closest(t).find(".product-added-to-cart-dialog");console.log(n),n.find(".total-count").text(a.showDialog.totalCount),n.find(".total-price").text(a.showDialog.totalPriceString),n.removeClass("hide"),clearTimeout(i),i=setTimeout(function(){n.addClass("hide")},5e3)}$(".minicart-menu").trigger("reinitialize.miniCart")}),t.find(".product-added-to-cart-dialog .dialog-close").on("click",function(){$(this).closest(".product-added-to-cart-dialog").addClass("hide")})});